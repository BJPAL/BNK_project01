<div th:fragment="userHeader" xmlns:th="http://www.thymeleaf.org">
  <header class="header">
    <div class="logo">
      <a th:href="@{/}"><img src="/images/logo.png" alt="BNK 부산은행 로고" /></a>
    </div>

  <div class="right-section">
    <nav class="main-nav">
      <button class="nav-btn">개인</button>
      <button class="nav-btn">기업</button>

      <div class="dropdown">
          <button class="nav-btn">금융상품</button>
          <div class="dropdown-content">
              <a href="#">추천상품</a>
              <a href="#">펀드</a>
              <a href="#">카드</a>
              <a href="#">예금</a>
              <a href="#">대출</a>
              <a href="#">보험/공제</a>
              <a href="#">웰스타로보B</a>
            </div>
      </div>
    </nav>

    <div class="user-info">
    <!-- 로그인 안 된 경우 -->
    <div th:if="${session.user == null}">
      <a th:href="@{/auth/login}">로그인</a>
      <span>|</span>
      <a th:href="@{/auth/join}">회원가입</a>
    </div>

    <!-- 로그인 된 경우 -->
    <div th:if="${session.user != null}">
      <a th:href="@{/mypage}"><span th:text="${session.user.name + '님 환영합니다'}"></span></a>
      <span>|</span>
      <a th:href="@{/auth/logout}">로그아웃</a>
    </div>

      <button class="menu-icon" onclick="toggleMenu()"><img src="/images/menu_icon.png" alt="menu 아이콘"></button>
    </div>

    <script>
    function toggleMenu() {
        const menu = document.getElementById("hiddenMenu");
        menu.classList.toggle("show");
    }
    </script>

    <div class="hidden-menu" id="hiddenMenu">
        <div class="hidden-menu-title">
            <h3>전체 메뉴보기</h3>
            <button onclick="toggleMenu()"><img src="/images/close-icon.png" alt="메뉴 닫기"></button>
        </div>
        <div class="hidden-menu-wrap">
            <div class="hidden-menu-tabBar">
                <div class="hidden-menu-tab active">전체서비스</div>
                <div class="hidden-menu-tab">개인뱅킹</div>
                <div class="hidden-menu-tab">기업뱅킹</div>
                <div class="hidden-menu-tab">금융상품</div>
            </div>
            <div class="hidden-menu-subTab">
                <span class="active">조회</span> | 
                <span>외환</span> | 
                <span>보험</span> | 
                <span>공과금납부</span> | 
                <span>전자어음</span> | 
                <span>뱅킹관리</span> | 
                <span>공동인증센터</span> | 
                <span>마이페이지</span> | 
                <span>금융인증센터</span>
            </div>

            <script>
            document.addEventListener("DOMContentLoaded", function () {
                const mainTabSpans = document.querySelectorAll(".hidden-menu-tab");

                mainTabSpans.forEach(tab => {
                tab.addEventListener("click", function () {
                    mainTabSpans.forEach(t => t.classList.remove("active"));
                    this.classList.add("active");
                });
                });

                const subTabSpans = document.querySelectorAll(".hidden-menu-subTab span");

                subTabSpans.forEach(tab => {
                tab.addEventListener("click", function () {
                    subTabSpans.forEach(t => t.classList.remove("active"));
                    this.classList.add("active");
                });
                });
            });
            </script>
        </div>
    </div>
  </header>
</div>
