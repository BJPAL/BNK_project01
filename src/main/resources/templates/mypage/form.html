<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8">
  <title>정보 수정</title>
  <link rel="stylesheet" th:href="@{/css/bank.css}">
  <style>
    body { max-width: 600px; margin: 30px auto; font-family: sans-serif; }
    label { display: block; margin-top: 15px; font-weight: bold; }
    input { width: 100%; padding: 8px; margin-top: 5px; box-sizing: border-box; }
    .error { color: red; font-size: 0.9em; }
    .success { color: green; margin-top: 10px; }
    button { margin-top: 20px; padding: 10px 20px; font-size: 1em; }
  </style>
</head>
<body>

<!-- 공통 헤더 -->
<th:block th:replace="fragments/header :: header"></th:block>
<th:block th:replace="mypage/_tabs :: tabs"></th:block>




<h2>회원 정보 수정</h2>

<form th:action="@{/mypage}" th:object="${updateRequest}" method="post">

  <!-- 아이디는 수정 불가니까 readonly로 출력만 -->
  <label>아이디</label>
  <input type="text" th:value="${updateRequest.username}" readonly class="form-control-plaintext"/>



  <label>현재 비밀번호</label>
  <input type="password" th:field="*{currentPassword}" placeholder="현재 비밀번호를 입력하세요" required/>
  <div th:if="${#fields.hasErrors('currentPassword')}" class="error" th:errors="*{currentPassword}"></div>

  <label>새 비밀번호</label>
  <input type="password" th:field="*{newPassword}" placeholder="변경 할 비밀번호 입력하세요"/>
  <div th:if="${#fields.hasErrors('newPassword')}" class="error" th:errors="*{newPassword}"></div>

  <label>새 비밀번호 확인</label>
  <input type="password" th:field="*{confirmNewPassword}" placeholder="새 비밀번호를 다시 입력"/>
  <div th:if="${#fields.hasErrors('confirmNewPassword')}" class="error" th:errors="*{confirmNewPassword}"></div>

  <label>이름</label>
  <input type="text" th:field="*{name}" placeholder="이름을 입력하세요" required/>
  <div th:if="${#fields.hasErrors('name')}" class="error" th:errors="*{name}"></div>

  <label>전화번호</label>
  <input type="text" th:field="*{phone}" placeholder="010-1234-5678 형식" required/>
  <div th:if="${#fields.hasErrors('phone')}" class="error" th:errors="*{phone}"></div>

  <button type="submit">정보 수정</button>

  <div th:if="${updateError}" class="error" th:text="${updateError}"></div>
  <div th:if="${success}" class="success" th:text="${success}"></div>

</form>

</body>
</html>
